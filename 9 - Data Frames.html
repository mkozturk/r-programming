<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Introduction to programming with R - 9&nbsp; Data Frames</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./10 - Factors.html" rel="next">
<link href="./8 - Lists.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./9 - Data Frames.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Data Frames</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introduction to programming with R</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1 - First Steps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">First steps in R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2 - Vectors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data vectors in R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3 - Basic plotting and random numbers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Basic plotting</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4 - Functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Functions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./5 - Decision structures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Conditional execution</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./6 - Loops.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Repetition structures</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./7 - Matrices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Matrices</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./8 - Lists.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lists</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./9 - Data Frames.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Data Frames</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10 - Factors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Factors and categories</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11 - Data import &amp; plotting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Data Import &amp; more plotting</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12 - Correlation and regression analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Correlations and linear regression</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#why-not-use-a-matrix" id="toc-why-not-use-a-matrix" class="nav-link active" data-scroll-target="#why-not-use-a-matrix">Why not use a matrix?</a></li>
  <li><a href="#creating-data-frames" id="toc-creating-data-frames" class="nav-link" data-scroll-target="#creating-data-frames">Creating data frames</a></li>
  <li><a href="#accessing-columns-of-data-frames" id="toc-accessing-columns-of-data-frames" class="nav-link" data-scroll-target="#accessing-columns-of-data-frames">Accessing columns of data frames</a></li>
  <li><a href="#accessing-elements-via-matrix-like-indexing" id="toc-accessing-elements-via-matrix-like-indexing" class="nav-link" data-scroll-target="#accessing-elements-via-matrix-like-indexing">Accessing elements via matrix-like indexing</a></li>
  <li><a href="#selecting-rows-using-indices" id="toc-selecting-rows-using-indices" class="nav-link" data-scroll-target="#selecting-rows-using-indices">Selecting rows using indices</a></li>
  <li><a href="#selecting-some-columns" id="toc-selecting-some-columns" class="nav-link" data-scroll-target="#selecting-some-columns">Selecting some columns</a></li>
  <li><a href="#filtering-data-frames" id="toc-filtering-data-frames" class="nav-link" data-scroll-target="#filtering-data-frames">Filtering data frames</a></li>
  <li><a href="#adding-new-rows" id="toc-adding-new-rows" class="nav-link" data-scroll-target="#adding-new-rows">Adding new rows</a></li>
  <li><a href="#concatenate-two-data-frames" id="toc-concatenate-two-data-frames" class="nav-link" data-scroll-target="#concatenate-two-data-frames">Concatenate two data frames</a></li>
  <li><a href="#adding-new-columns" id="toc-adding-new-columns" class="nav-link" data-scroll-target="#adding-new-columns">Adding new columns</a></li>
  <li><a href="#merging-data-frames" id="toc-merging-data-frames" class="nav-link" data-scroll-target="#merging-data-frames">Merging data frames</a></li>
  <li><a href="#inner-and-outer-joins" id="toc-inner-and-outer-joins" class="nav-link" data-scroll-target="#inner-and-outer-joins">Inner and outer joins</a></li>
  <li><a href="#applications" id="toc-applications" class="nav-link" data-scroll-target="#applications">Applications</a></li>
  <li><a href="#analyze-the-grades-in-a-class" id="toc-analyze-the-grades-in-a-class" class="nav-link" data-scroll-target="#analyze-the-grades-in-a-class">Analyze the grades in a class</a></li>
  <li><a href="#grading-multiple-choice-exams" id="toc-grading-multiple-choice-exams" class="nav-link" data-scroll-target="#grading-multiple-choice-exams">Grading multiple-choice exams</a></li>
  <li><a href="#item-database" id="toc-item-database" class="nav-link" data-scroll-target="#item-database">Item database</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Data Frames</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><strong>Data frames</strong> are used for representing tabular data where each column has a different type, such as</p>
<table class="table">
<thead>
<tr class="header">
<th>Name</th>
<th>Height</th>
<th>Weight</th>
<th>Gym member?</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Cem</td>
<td>1.75</td>
<td>66</td>
<td>T</td>
<td>Istanbul</td>
</tr>
<tr class="even">
<td>Can</td>
<td>1.70</td>
<td>65</td>
<td>F</td>
<td>Ankara</td>
</tr>
<tr class="odd">
<td>Hande</td>
<td>1.62</td>
<td>61</td>
<td>T</td>
<td>Izmir</td>
</tr>
</tbody>
</table>
<ul>
<li><em>Lists</em> are heterogeneous analogs of <em>vectors</em>.</li>
<li><em>Data frames</em> are heterogenous analogs of <em>matrices</em>.</li>
<li>Internally, a data frame is a <em>list</em> of equal-length <em>vectors</em>.</li>
</ul>
<section id="why-not-use-a-matrix" class="level1">
<h1>Why not use a matrix?</h1>
<p>Earlier we have seen how to store data in vectors, for example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>heights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">Can=</span><span class="fl">1.70</span>, <span class="at">Cem=</span><span class="fl">1.75</span>, <span class="at">Hande=</span><span class="fl">1.62</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>weights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">Can=</span><span class="dv">65</span>, <span class="at">Cem=</span><span class="dv">66</span>, <span class="at">Hande=</span><span class="dv">61</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we want to have this data combined in a table, we can generate a matrix out of it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>height_weight <span class="ot">&lt;-</span> <span class="fu">cbind</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="fl">1.70</span>, <span class="fl">1.75</span>,<span class="fl">1.62</span>),</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">65</span>, <span class="dv">66</span>, <span class="dv">61</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(height_weight) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Can"</span>,<span class="st">"Cem"</span>,<span class="st">"Hande"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(height_weight) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Height"</span>,<span class="st">"Weight"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>height_weight</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight
Can     1.70     65
Cem     1.75     66
Hande   1.62     61</code></pre>
</div>
</div>
<p>Alternatively, if the data are already stored in a vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>height_weight <span class="ot">&lt;-</span> <span class="fu">cbind</span>(heights, weights)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(height_weight) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Height"</span>,<span class="st">"Weight"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>height_weight</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight
Can     1.70     65
Cem     1.75     66
Hande   1.62     61</code></pre>
</div>
</div>
<p>For example, get the BMI of “Can”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>height_weight[<span class="st">"Can"</span>,<span class="st">"Weight"</span>]<span class="sc">/</span>height_weight[<span class="st">"Can"</span>,<span class="st">"Height"</span>]<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22.49135</code></pre>
</div>
</div>
<p>Trouble arises when we want to store the Boolean gym membership data in this matrix as well.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>heights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">Can=</span><span class="fl">1.70</span>, <span class="at">Cem=</span><span class="fl">1.75</span>, <span class="at">Hande=</span><span class="fl">1.62</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>weights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">Can=</span><span class="dv">65</span>, <span class="at">Cem=</span><span class="dv">66</span>, <span class="at">Hande=</span><span class="dv">61</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>member <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">Can=</span><span class="cn">TRUE</span>, <span class="at">Cem=</span><span class="cn">FALSE</span>, <span class="at">Hande=</span><span class="cn">TRUE</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>height_weight <span class="ot">&lt;-</span> <span class="fu">cbind</span>(heights, weights, member)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(height_weight) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Height"</span>,<span class="st">"Weight"</span>,<span class="st">"Gym member"</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>height_weight</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Gym member
Can     1.70     65          1
Cem     1.75     66          0
Hande   1.62     61          1</code></pre>
</div>
</div>
<ul>
<li>The last column has numeric values 0 or 1, instead of <code>TRUE</code> or <code>FALSE</code>.</li>
<li>Reason: All elements in a matrix must have <em>the same mode</em> (numeric here).</li>
<li>If a new mode is added (Boolean here), all elements are <em>coerced</em> to a common type (numeric here).</li>
<li><code>TRUE</code> becomes 1, <code>FALSE</code> becomes 0.</li>
</ul>
<p>Suppose we also want to add the city data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>city <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">Can=</span><span class="st">"Ankara"</span>,<span class="at">Cem=</span><span class="st">"Istanbul"</span>,<span class="at">Hande=</span><span class="st">"Izmir"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>height_weight <span class="ot">&lt;-</span> <span class="fu">cbind</span>(heights, weights, member, city)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(height_weight) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Height"</span>,<span class="st">"Weight"</span>,<span class="st">"Gym member"</span>,<span class="st">"City"</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(height_weight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Gym member City      
Can   "1.7"  "65"   "TRUE"     "Ankara"  
Cem   "1.75" "66"   "FALSE"    "Istanbul"
Hande "1.62" "61"   "TRUE"     "Izmir"   </code></pre>
</div>
</div>
<p>All entries are now coerced to strings. The data is still there, but we cannot perform computations anymore.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>height_weight[<span class="st">"Can"</span>,<span class="st">"Weight"</span>]<span class="sc">/</span>height_weight[<span class="st">"Can"</span>,<span class="st">"Height"</span>]<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in height_weight["Can", "Height"]^2: non-numeric argument to binary operator</code></pre>
</div>
</div>
<p>Keep the data in separate vectors? * There would be no coercion, but data manipulation would be difficult. * Selecting subsets, adding/removing entries, would require several operations and great care. * A <em>data frame</em> that combines several vectors as data columns provides convenience.</p>
</section>
<section id="creating-data-frames" class="level1">
<h1>Creating data frames</h1>
<p>Several vectors can be combined into a data frame using the <code>data.frame()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>people <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Height=</span>heights, </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">Weight=</span>weights, </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">Member=</span><span class="fu">c</span>(<span class="at">Can=</span><span class="cn">TRUE</span>, <span class="at">Cem=</span><span class="cn">FALSE</span>, <span class="at">Hande=</span><span class="cn">TRUE</span>), </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">City=</span>city,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">stringsAsFactors=</span><span class="cn">FALSE</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(people)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City
Can     1.70     65   TRUE   Ankara
Cem     1.75     66  FALSE Istanbul
Hande   1.62     61   TRUE    Izmir</code></pre>
</div>
</div>
<p><strong>Recycling</strong> applies to data frames as well. Suppose we add the <code>"City"</code> data and make it <code>"Istanbul"</code> for all:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">Height=</span>heights, <span class="at">Weight=</span>weights, <span class="at">City=</span><span class="st">"Istanbul"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight     City
Can     1.70     65 Istanbul
Cem     1.75     66 Istanbul
Hande   1.62     61 Istanbul</code></pre>
</div>
</div>
<p>Here, the element <code>"Istanbul"</code> is repeated until it matches the length of other vectors.</p>
<p>The functions <code>rownames()</code> and <code>colnames()</code> can be used to change labels of rows and columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>tempdf <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">c</span>(<span class="fl">1.70</span>, <span class="fl">1.75</span>,<span class="fl">1.62</span>),<span class="fu">c</span>(<span class="dv">65</span>, <span class="dv">66</span>, <span class="dv">61</span>))</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>tempdf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  c.1.7..1.75..1.62. c.65..66..61.
1               1.70            65
2               1.75            66
3               1.62            61</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(tempdf) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Can"</span>,<span class="st">"Cem"</span>,<span class="st">"Hande"</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tempdf) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Height"</span>,<span class="st">"Weight"</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>tempdf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight
Can     1.70     65
Cem     1.75     66
Hande   1.62     61</code></pre>
</div>
</div>
</section>
<section id="accessing-columns-of-data-frames" class="level1">
<h1>Accessing columns of data frames</h1>
<p>A data frame is a <strong>list of columns</strong>; so we can access a column using the list notation we’ve seen before.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>people</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City
Can     1.70     65   TRUE   Ankara
Cem     1.75     66  FALSE Istanbul
Hande   1.62     61   TRUE    Izmir</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>people[[<span class="dv">1</span>]]  <span class="co"># indexing with component number</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.70 1.75 1.62</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>people<span class="sc">$</span>Weight  <span class="co"># component name</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 65 66 61</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>people[[<span class="st">"City"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Ankara"   "Istanbul" "Izmir"   </code></pre>
</div>
</div>
</section>
<section id="accessing-elements-via-matrix-like-indexing" class="level1">
<h1>Accessing elements via matrix-like indexing</h1>
<p>A data frame can be indexed as if it is a matrix, using the <code>[row, col]</code> notation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>people</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City
Can     1.70     65   TRUE   Ankara
Cem     1.75     66  FALSE Istanbul
Hande   1.62     61   TRUE    Izmir</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>people[,<span class="dv">1</span>]  <span class="co"># column 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.70 1.75 1.62</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>people[<span class="dv">2</span>,<span class="dv">1</span>] <span class="co"># row 2, column 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.75</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>people[<span class="st">"Cem"</span>,<span class="st">"Height"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.75</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>people[<span class="st">"Can"</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Height Weight Member   City
Can    1.7     65   TRUE Ankara</code></pre>
</div>
</div>
</section>
<section id="selecting-rows-using-indices" class="level1">
<h1>Selecting rows using indices</h1>
<p>We can specify a vector of indices to select rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>people</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City
Can     1.70     65   TRUE   Ankara
Cem     1.75     66  FALSE Istanbul
Hande   1.62     61   TRUE    Izmir</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>people[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member   City
Can     1.70     65   TRUE Ankara
Hande   1.62     61   TRUE  Izmir</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>people[<span class="fu">c</span>(<span class="st">"Can"</span>,<span class="st">"Hande"</span>),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member   City
Can     1.70     65   TRUE Ankara
Hande   1.62     61   TRUE  Izmir</code></pre>
</div>
</div>
<p>A negative index, again, indicates an element that is to be omitted.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>people[<span class="sc">-</span><span class="dv">2</span>,<span class="sc">-</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight   City
Can     1.70     65 Ankara
Hande   1.62     61  Izmir</code></pre>
</div>
</div>
</section>
<section id="selecting-some-columns" class="level1">
<h1>Selecting some columns</h1>
<p>We can provide a list of column names or numeric indices to get a subframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>people[, <span class="fu">c</span>(<span class="st">"Member"</span>,<span class="st">"City"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Member     City
Can     TRUE   Ankara
Cem    FALSE Istanbul
Hande   TRUE    Izmir</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>people[, <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Member     City
Can     TRUE   Ankara
Cem    FALSE Istanbul
Hande   TRUE    Izmir</code></pre>
</div>
</div>
<p>A subset of rows and a subset of columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>people[<span class="fu">c</span>(<span class="st">"Can"</span>,<span class="st">"Cem"</span>), <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Height Weight
Can   1.70     65
Cem   1.75     66</code></pre>
</div>
</div>
</section>
<section id="filtering-data-frames" class="level1">
<h1>Filtering data frames</h1>
<p>The Boolean operators to select vector elements are applicable to data frames as well.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>people</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City
Can     1.70     65   TRUE   Ankara
Cem     1.75     66  FALSE Istanbul
Hande   1.62     61   TRUE    Izmir</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>people<span class="sc">$</span>Height <span class="sc">&gt;=</span> <span class="fl">1.70</span> <span class="sc">|</span> people<span class="sc">$</span>City <span class="sc">==</span> <span class="st">"Izmir"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>people[ people<span class="sc">$</span>Height<span class="sc">&gt;=</span> <span class="fl">1.70</span>, <span class="st">"City"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Ankara"   "Istanbul"</code></pre>
</div>
</div>
<div class="cell" data-slideshow="{&quot;slide_type&quot;:&quot;slide&quot;}">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>people[ people<span class="sc">$</span>Member, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member   City
Can     1.70     65   TRUE Ankara
Hande   1.62     61   TRUE  Izmir</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>people[ people<span class="sc">$</span>Member, <span class="fu">c</span>(<span class="st">"Height"</span>,<span class="st">"City"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height   City
Can     1.70 Ankara
Hande   1.62  Izmir</code></pre>
</div>
</div>
</section>
<section id="adding-new-rows" class="level1">
<h1>Adding new rows</h1>
<p>As with matrices, we can use <code>rbind()</code> to add a new row to an existing data frame. The new row is usually in the form of a list.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>people</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City
Can     1.70     65   TRUE   Ankara
Cem     1.75     66  FALSE Istanbul
Hande   1.62     61   TRUE    Izmir</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(people, <span class="at">Lale=</span><span class="fu">list</span>(<span class="fl">1.71</span>, <span class="dv">64</span>, <span class="cn">FALSE</span>, <span class="st">"Bursa"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City
Can     1.70     65   TRUE   Ankara
Cem     1.75     66  FALSE Istanbul
Hande   1.62     61   TRUE    Izmir
Lale    1.71     64  FALSE    Bursa</code></pre>
</div>
</div>
</section>
<section id="concatenate-two-data-frames" class="level1">
<h1>Concatenate two data frames</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>newpeople <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">Weight=</span><span class="fu">c</span>(<span class="dv">64</span>, <span class="dv">50</span>),</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Member=</span><span class="fu">c</span>(F,T),</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">City=</span><span class="fu">c</span>(<span class="st">"Bursa"</span>,<span class="st">"Istanbul"</span>),</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Height=</span><span class="fu">c</span>(<span class="at">Lale=</span><span class="fl">1.71</span>, <span class="at">Ziya=</span><span class="fl">1.45</span>)</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>newpeople</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Weight Member     City Height
Lale     64  FALSE    Bursa   1.71
Ziya     50   TRUE Istanbul   1.45</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(people, newpeople)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City
Can     1.70     65   TRUE   Ankara
Cem     1.75     66  FALSE Istanbul
Hande   1.62     61   TRUE    Izmir
Lale    1.71     64  FALSE    Bursa
Ziya    1.45     50   TRUE Istanbul</code></pre>
</div>
</div>
</section>
<section id="adding-new-columns" class="level1">
<h1>Adding new columns</h1>
<p>Suppose we want to add a column for BMI, which we calculate using the existing columns. We can do this using <code>cbind()</code> as follows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>people_bmi <span class="ot">&lt;-</span> <span class="fu">cbind</span>(people, people<span class="sc">$</span>Weight<span class="sc">/</span>people<span class="sc">$</span>Height<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>people_bmi</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City people$Weight/people$Height^2
Can     1.70     65   TRUE   Ankara                      22.49135
Cem     1.75     66  FALSE Istanbul                      21.55102
Hande   1.62     61   TRUE    Izmir                      23.24341</code></pre>
</div>
</div>
<p>Note that the name of the new column is automatically set. We can change this using the <code>names()</code> or <code>colnames()</code> functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(people_bmi)[<span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="st">"BMI"</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>people_bmi</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City      BMI
Can     1.70     65   TRUE   Ankara 22.49135
Cem     1.75     66  FALSE Istanbul 21.55102
Hande   1.62     61   TRUE    Izmir 23.24341</code></pre>
</div>
</div>
<p>A more direct way:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>people2 <span class="ot">&lt;-</span> people</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>people2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City
Can     1.70     65   TRUE   Ankara
Cem     1.75     66  FALSE Istanbul
Hande   1.62     61   TRUE    Izmir</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>people2<span class="sc">$</span>BMI <span class="ot">&lt;-</span> people2<span class="sc">$</span>Weight<span class="sc">/</span>people2<span class="sc">$</span>Height<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>people2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City      BMI
Can     1.70     65   TRUE   Ankara 22.49135
Cem     1.75     66  FALSE Istanbul 21.55102
Hande   1.62     61   TRUE    Izmir 23.24341</code></pre>
</div>
</div>
<p>We can create a new column as we please. For example, a column with a single <code>NA</code> value.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>people2<span class="sc">$</span>obese <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>people2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City      BMI obese
Can     1.70     65   TRUE   Ankara 22.49135    NA
Cem     1.75     66  FALSE Istanbul 21.55102    NA
Hande   1.62     61   TRUE    Izmir 23.24341    NA</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>people2<span class="sc">$</span>obese <span class="ot">&lt;-</span> people2<span class="sc">$</span>BMI<span class="sc">&gt;</span><span class="dv">30</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>people2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City      BMI obese
Can     1.70     65   TRUE   Ankara 22.49135 FALSE
Cem     1.75     66  FALSE Istanbul 21.55102 FALSE
Hande   1.62     61   TRUE    Izmir 23.24341 FALSE</code></pre>
</div>
</div>
<p>Remove a column by setting it to <code>NULL</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>people2<span class="sc">$</span>obese <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>people2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City      BMI
Can     1.70     65   TRUE   Ankara 22.49135
Cem     1.75     66  FALSE Istanbul 21.55102
Hande   1.62     61   TRUE    Izmir 23.24341</code></pre>
</div>
</div>
</section>
<section id="merging-data-frames" class="level1">
<h1>Merging data frames</h1>
<p>The <code>merge(x,y)</code> function is used to create a new data frame from existing frames <code>x</code> and <code>y</code>, by combining them along a common column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Name=</span><span class="fu">c</span>(<span class="st">"Can"</span>,<span class="st">"Cem"</span>,<span class="st">"Hande"</span>), <span class="at">Phone=</span><span class="fu">c</span>(<span class="dv">1234</span>,<span class="dv">4345</span>,<span class="dv">8492</span>))</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Age=</span><span class="fu">c</span>(<span class="dv">25</span>,<span class="dv">27</span>,<span class="dv">26</span>), <span class="at">Name=</span><span class="fu">c</span>(<span class="st">"Cem"</span>,<span class="st">"Hande"</span>,<span class="st">"Can"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Name Phone
1   Can  1234
2   Cem  4345
3 Hande  8492</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age  Name
1  25   Cem
2  27 Hande
3  26   Can</code></pre>
</div>
</div>
<div class="cell" data-slideshow="{&quot;slide_type&quot;:&quot;slide&quot;}">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Name Phone
1   Can  1234
2   Cem  4345
3 Hande  8492</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age  Name
1  25   Cem
2  27 Hande
3  26   Can</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">merge</span>(df1,df2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Name Phone Age
1   Can  1234  26
2   Cem  4345  25
3 Hande  8492  27</code></pre>
</div>
</div>
<ul>
<li>The <code>merge()</code> function automatically detects that the <code>Name</code> column is common in both, and merges the data on it.</li>
<li>The order of names are different in the two frames, which is accounted for.</li>
</ul>
<p>The columns we want to merge over may have different names in the two frames. In that case we use the <code>by.x</code> and <code>by.y</code> arguments to <code>merge()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Age=</span><span class="fu">c</span>(<span class="dv">25</span>,<span class="dv">27</span>,<span class="dv">26</span>), <span class="at">first_name=</span><span class="fu">c</span>(<span class="st">"Cem"</span>,<span class="st">"Hande"</span>,<span class="st">"Can"</span>))</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Name Phone
1   Can  1234
2   Cem  4345
3 Hande  8492</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age first_name
1  25        Cem
2  27      Hande
3  26        Can</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">merge</span>(df1, df2, <span class="at">by.x=</span><span class="st">"Name"</span>, <span class="at">by.y=</span><span class="st">"first_name"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Name Phone Age
1   Can  1234  26
2   Cem  4345  25
3 Hande  8492  27</code></pre>
</div>
</div>
<p>Suppose we want to merge on row names.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>people</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City
Can     1.70     65   TRUE   Ankara
Cem     1.75     66  FALSE Istanbul
Hande   1.62     61   TRUE    Izmir</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>phonebook <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">phone=</span><span class="fu">c</span>(<span class="at">Can=</span><span class="dv">1234</span>, <span class="at">Cem=</span><span class="dv">4345</span>, <span class="at">Lale=</span><span class="dv">8492</span>))</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>phonebook</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     phone
Can   1234
Cem   4345
Lale  8492</code></pre>
</div>
</div>
<p>Note that <code>phonebook</code> does not contain Hande, and <code>people</code> does not contain Lale.</p>
<p>To merge by row names, specify<code>"row.names"</code> for the <code>by.x</code> and <code>by.y</code> parameters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">merge</span>(people, phonebook, <span class="at">by.x=</span><span class="st">"row.names"</span>, <span class="at">by.y=</span><span class="st">"row.names"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Row.names Height Weight Member     City phone
1       Can   1.70     65   TRUE   Ankara  1234
2       Cem   1.75     66  FALSE Istanbul  4345</code></pre>
</div>
</div>
</section>
<section id="inner-and-outer-joins" class="level1">
<h1>Inner and outer joins</h1>
<ul>
<li>The merged dataframe does not include Hande or Lale, because they are missing in one or the other data frame.</li>
<li>This is called an <strong>inner join</strong> operation.</li>
<li>To get all the rows, with some data missing, set <code>all=TRUE</code> (<strong>outer join</strong> operation).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>merged_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(people, phonebook,</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">by.x=</span><span class="st">"row.names"</span>, <span class="at">by.y=</span><span class="st">"row.names"</span>, </span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">all=</span><span class="cn">TRUE</span>)</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>merged_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Row.names Height Weight Member     City phone
1       Can   1.70     65   TRUE   Ankara  1234
2       Cem   1.75     66  FALSE Istanbul  4345
3     Hande   1.62     61   TRUE    Izmir    NA
4      Lale     NA     NA     NA     &lt;NA&gt;  8492</code></pre>
</div>
</div>
<p>To set the people names as row names, assign them using <code>rownames()</code> function, and remove the <code>"Row.names"</code> column afterwards.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(merged_df) <span class="ot">&lt;-</span> merged_df<span class="sc">$</span>Row.names</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>merged_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Row.names Height Weight Member     City phone
Can         Can   1.70     65   TRUE   Ankara  1234
Cem         Cem   1.75     66  FALSE Istanbul  4345
Hande     Hande   1.62     61   TRUE    Izmir    NA
Lale       Lale     NA     NA     NA     &lt;NA&gt;  8492</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>merged_df<span class="sc">$</span>Row.names <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>merged_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Height Weight Member     City phone
Can     1.70     65   TRUE   Ankara  1234
Cem     1.75     66  FALSE Istanbul  4345
Hande   1.62     61   TRUE    Izmir    NA
Lale      NA     NA     NA     &lt;NA&gt;  8492</code></pre>
</div>
</div>
</section>
<section id="applications" class="level1">
<h1>Applications</h1>
</section>
<section id="analyze-the-grades-in-a-class" class="level1">
<h1>Analyze the grades in a class</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>grades <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">student =</span> <span class="fu">c</span>(<span class="st">"Can"</span>,<span class="st">"Cem"</span>,<span class="st">"Hande"</span>,<span class="st">"Lale"</span>,<span class="st">"Ziya"</span>),</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">midterm1 =</span> <span class="fu">c</span>(<span class="dv">45</span>, <span class="dv">74</span>, <span class="dv">67</span>, <span class="dv">52</span>, <span class="dv">31</span>),</span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">midterm2 =</span> <span class="fu">c</span>(<span class="dv">68</span>, <span class="dv">83</span>, <span class="dv">56</span>, <span class="dv">22</span>, <span class="dv">50</span>),</span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">final =</span> <span class="fu">c</span>(<span class="dv">59</span>, <span class="dv">91</span>, <span class="dv">62</span>, <span class="dv">49</span>, <span class="dv">65</span>))</span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>grades</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  student midterm1 midterm2 final
1     Can       45       68    59
2     Cem       74       83    91
3   Hande       67       56    62
4    Lale       52       22    49
5    Ziya       31       50    65</code></pre>
</div>
</div>
<p>Get weighted average</p>
<div class="cell" data-slideshow="{&quot;slide_type&quot;:&quot;-&quot;}">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>grades<span class="sc">$</span>score <span class="ot">&lt;-</span> grades<span class="sc">$</span>midterm1<span class="sc">*</span><span class="fl">0.3</span> <span class="sc">+</span> grades<span class="sc">$</span>midterm2<span class="sc">*</span><span class="fl">0.3</span> <span class="sc">+</span> grades<span class="sc">$</span>final<span class="sc">*</span><span class="fl">0.4</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>grades</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  student midterm1 midterm2 final score
1     Can       45       68    59  57.5
2     Cem       74       83    91  83.5
3   Hande       67       56    62  61.7
4    Lale       52       22    49  41.8
5    Ziya       31       50    65  50.3</code></pre>
</div>
</div>
<p>Get averages of columns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>grades[,<span class="sc">-</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  midterm1 midterm2 final score
1       45       68    59  57.5
2       74       83    91  83.5
3       67       56    62  61.7
4       52       22    49  41.8
5       31       50    65  50.3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(grades[,<span class="sc">-</span><span class="dv">1</span>],<span class="dv">2</span>,mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>midterm1 midterm2    final    score 
   53.80    55.80    65.20    58.96 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(grades[,<span class="sc">-</span><span class="dv">1</span>],mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>midterm1 midterm2    final    score 
   53.80    55.80    65.20    58.96 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(grades[,<span class="sc">-</span><span class="dv">1</span>],mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$midterm1
[1] 53.8

$midterm2
[1] 55.8

$final
[1] 65.2

$score
[1] 58.96</code></pre>
</div>
</div>
<p>Assign letter grades</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>lettergrade <span class="ot">&lt;-</span> <span class="cf">function</span>(score){</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (score <span class="sc">&gt;</span> <span class="dv">80</span>) <span class="st">"A"</span> <span class="cf">else</span> <span class="cf">if</span> (score <span class="sc">&gt;</span> <span class="dv">70</span>) <span class="st">"B"</span> <span class="cf">else</span> <span class="cf">if</span> (score<span class="sc">&gt;</span><span class="dv">60</span>) <span class="st">"C"</span> <span class="cf">else</span> <span class="cf">if</span> (score<span class="sc">&gt;</span><span class="dv">50</span>) <span class="st">"D"</span> <span class="cf">else</span> <span class="st">"F"</span></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lettergrade</span>(<span class="dv">67</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>grades<span class="sc">$</span>score</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 57.5 83.5 61.7 41.8 50.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(grades<span class="sc">$</span>score,lettergrade)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "D" "A" "C" "F" "D"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>grades<span class="sc">$</span>letter <span class="ot">&lt;-</span> <span class="fu">sapply</span>(grades<span class="sc">$</span>score, lettergrade)</span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>grades</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  student midterm1 midterm2 final score letter
1     Can       45       68    59  57.5      D
2     Cem       74       83    91  83.5      A
3   Hande       67       56    62  61.7      C
4    Lale       52       22    49  41.8      F
5    Ziya       31       50    65  50.3      D</code></pre>
</div>
</div>
</section>
<section id="grading-multiple-choice-exams" class="level1">
<h1>Grading multiple-choice exams</h1>
<p>Our students have taken a multiple-choice exam. All their answers, as well as the answer key, are recorded as vectors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>key <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"C"</span>,<span class="st">"D"</span>,<span class="st">"A"</span>)</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>answers <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"D"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>),</span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"D"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"A"</span>),</span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">"B"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"B"</span>),</span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"D"</span>),</span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">"C"</span>, <span class="st">"C"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"A"</span>)</span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We initialize a separate data frame with the student information:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>exam <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(answers,</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">"Can"</span>,<span class="st">"Cem"</span>,<span class="st">"Hande"</span>,<span class="st">"Lale"</span>,<span class="st">"Ziya"</span>))</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>exam</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      X1 X2 X3 X4 X5
Can    A  B  D  A  B
Cem    A  D  C  D  A
Hande  B  B  C  D  B
Lale   A  B  C  D  D
Ziya   C  C  C  D  A</code></pre>
</div>
</div>
<p>Now we can process this data frame to get the number of correct answers for each student. For that, we can use the <code>sum(x==y)</code> operation, which gives us the number of equal elements.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>key</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "A" "B" "C" "D" "A"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>exam[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    X1 X2 X3 X4 X5
Can  A  B  D  A  B</code></pre>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>exam[<span class="dv">1</span>,]<span class="sc">==</span>key</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      X1   X2    X3    X4    X5
Can TRUE TRUE FALSE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(exam[<span class="dv">1</span>,]<span class="sc">==</span>key)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>To repeat this for each row, we create a function that returns the number of matching answers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>ncorrect <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(x<span class="sc">==</span>key)</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncorrect</span>(exam[<span class="dv">1</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>And we use <code>apply()</code> to apply it to every row.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>exam</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      X1 X2 X3 X4 X5
Can    A  B  D  A  B
Cem    A  D  C  D  A
Hande  B  B  C  D  B
Lale   A  B  C  D  D
Ziya   C  C  C  D  A</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(apply)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(exam,<span class="dv">1</span>,ncorrect)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Can   Cem Hande  Lale  Ziya 
    2     4     3     4     3 </code></pre>
</div>
</div>
<p>We can store this result by creating a new column in the data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>exam<span class="sc">$</span>correct <span class="ot">&lt;-</span> <span class="fu">apply</span>(exam,<span class="dv">1</span>,ncorrect)</span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>exam</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      X1 X2 X3 X4 X5 correct
Can    A  B  D  A  B       2
Cem    A  D  C  D  A       4
Hande  B  B  C  D  B       3
Lale   A  B  C  D  D       4
Ziya   C  C  C  D  A       3</code></pre>
</div>
</div>
</section>
<section id="item-database" class="level1">
<h1>Item database</h1>
<p>Suppose you run a retail store and you keep a data base of your items, their unit price, and the VAT rate for each item, such as the following.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>items <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">"Milk"</span>,<span class="st">"Meat"</span>,<span class="st">"Toothpaste"</span>,<span class="st">"Pencil"</span>,<span class="st">"Detergent"</span>),</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">vat =</span> <span class="fu">c</span>(<span class="fl">0.05</span>, <span class="fl">0.04</span>, <span class="fl">0.05</span>, <span class="fl">0.06</span>, <span class="fl">0.03</span>),</span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">unitprice =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a>items</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            vat unitprice
Milk       0.05        10
Meat       0.04        20
Toothpaste 0.05         5
Pencil     0.06         1
Detergent  0.03         4</code></pre>
</div>
</div>
<p>You get some orders for some items, which your automated system stores with an order ID:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>orders <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">"1234"</span>,<span class="st">"5761"</span>,<span class="st">"1832"</span>),</span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">item =</span> <span class="fu">c</span>(<span class="st">"Milk"</span>,<span class="st">"Meat"</span>,<span class="st">"Toothpaste"</span>),</span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">amount =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a>orders</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           item amount
1234       Milk      3
5761       Meat      1
1832 Toothpaste      2</code></pre>
</div>
</div>
<p>Our task is to add a new column to the <code>orders</code> data frame that holds the total payment for each order, including the VAT.</p>
<pre><code>  item       amount vat  unitprice total
1 Meat       1      0.04 20        20.8 
2 Milk       3      0.05 10        31.5 
3 Toothpaste 2      0.05  5        10.5</code></pre>
<ul>
<li>Merge the orders and items with an inner join.</li>
<li>Store the result in a new data frame.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>orders2 <span class="ot">&lt;-</span> <span class="fu">merge</span>(orders,items,<span class="at">by.x=</span><span class="st">"item"</span>,<span class="at">by.y=</span><span class="st">"row.names"</span>)</span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>orders2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        item amount  vat unitprice
1       Meat      1 0.04        20
2       Milk      3 0.05        10
3 Toothpaste      2 0.05         5</code></pre>
</div>
</div>
<p>Now that we have the unit price and the VAT information on the same data frame, we can calculate the total to pay and store it in a new column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>orders2<span class="sc">$</span>total <span class="ot">&lt;-</span> (orders2<span class="sc">$</span>amount<span class="sc">*</span>orders2<span class="sc">$</span>unitprice)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">+</span>orders2<span class="sc">$</span>vat)</span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>orders2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        item amount  vat unitprice total
1       Meat      1 0.04        20  20.8
2       Milk      3 0.05        10  31.5
3 Toothpaste      2 0.05         5  10.5</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./8 - Lists.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lists</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./10 - Factors.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Factors and categories</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>